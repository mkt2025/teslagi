<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quran Audio Player</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .container {
      width: 90%;
      max-width: 500px;
      padding: 20px;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      text-align: left;
    }
    h1, h3 {
      color: #333;
      text-align: center;
    }
    h4{
      color: #333;
      text-align: left;
    }
    select, button {
      width: 100%;
      padding: 10px;
      margin: 5px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 16px;
    }
    audio {
      width: 100%;
      margin-top: 10px;
    }
    .loading {
      display: none;
      text-align: center;
      margin-top: 10px;
    }
    .loading img {
      width: 70px;
    }
    .autoplay-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Quran Audio Player</h1>

    <label for="reciter"><b>Reciter</b></label>
    <select id="reciter" onchange="updateAudio()">
      <option value="mtrod" data-server="server8">Abdullah Al Mathrud</option>
      <option value="a_ahmed" data-server="server11">Abdulaziz alahmad</option>
      <option value="aloosi" data-server="server6">Abdulrahman Aloosi</option>
      <option value="basit" data-server="server7">Abdul Basith Abdul Shamad</option>
      <option value="afs" data-server="server8">Musyari al afasiy</option>
    </select>

    <label for="chapter"><b>Chapter</b></label>
    <select id="chapter" onchange="updateAudio()">
      <option value="001">1: Al-Faatiha</option>
      <option value="002">2: Al-Baqara</option>
      <option value="003">3: Aal-i-Imraan</option>
      <option value="004">4: An-Nisaa</option>
      <option value="005">5: Al-Maaida</option>
      <option value="006">6: Al-An'aam</option>
      <option value="007">7: Al-A'raaf</option>
      <option value="008">8: Al-Anfaal</option>
                                <option value="009">9: At-Tawba</option>
                                <option value="010">10: Yunus</option>
                                <option value="011">11: Hud</option>
                                <option value="012">12: Yusuf</option>
                                <option value="013">13: Ar-Ra'd</option>
                                <option value="014">14: Ibrahim</option>
                                <option value="015">15: Al-Hijr</option>
                                <option value="016">16: An-Nahl</option>
                                <option value="017">17: Al-Israa</option>
                                <option value="018">18: Al-Kahf</option>
                                <option value="019">19: Maryam</option>
                                <option value="020">20: Taa-Haa</option>
                                <option value="021">21: Al-Anbiyaa</option>
                                <option value="022">22: Al-Hajj</option>
                                <option value="023">23: Al-Muminoon</option>
                                <option value="024">24: An-Noor</option>
                                <option value="025">25: Al-Furqaan</option>
                                <option value="026">26: Ash-Shu'araa</option>
                                <option value="027">27: An-Naml</option>
                                <option value="028">28: Al-Qasas</option>
                                <option value="029">29: Al-Ankaboot</option>
                                <option value="030">30: Ar-Room</option>
                                <option value="031">31: Luqman</option>
                                <option value="032">32: As-Sajda</option>
                                <option value="033">33: Al-Ahzaab</option>
                                <option value="034">34: Saba</option>
                                <option value="035">35: Faatir</option>
                                <option value="036">36: Yaseen</option>
                                <option value="037">37: As-Saaffaat</option>
                                <option value="038">38: Saad</option>
                                <option value="039">39: Az-Zumar</option>
                                <option value="040">40: Al-Ghaafir</option>
                                <option value="041">41: Fussilat</option>
                                <option value="042">42: Ash-Shura</option>
                                <option value="043">43: Az-Zukhruf</option>
                                <option value="044">44: Ad-Dukhaan</option>
                                <option value="045">45: Al-Jaathiya</option>
                                <option value="046">46: Al-Ahqaf</option>
                                <option value="047">47: Muhammad</option>
                                <option value="048">48: Al-Fath</option>
                                <option value="049">49: Al-Hujuraat</option>
                                <option value="050">50: Qaaf</option>
                                <option value="051">51: Adh-Dhaariyat</option>
                                <option value="052">52: At-Tur</option>
                                <option value="053">53: An-Najm</option>
                                <option value="054">54: Al-Qamar</option>
                                <option value="055">55: Ar-Rahmaan</option>
                                <option value="056">56: Al-Waaqia</option>
                                <option value="057">57: Al-Hadid</option>
                                <option value="058">58: Al-Mujaadila</option>
                                <option value="059">59: Al-Hashr</option>
                                <option value="060">60: Al-Mumtahana</option>
                                <option value="061">61: As-Saff</option>
                                <option value="062">62: Al-Jumu'a</option>
                                <option value="063">63: Al-Munaafiqoon</option>
                                <option value="064">64: At-Taghaabun</option>
                                <option value="065">65: At-Talaaq</option>
                                <option value="066">66: At-Tahrim</option>
                                <option value="067">67: Al-Mulk</option>
                                <option value="068">68: Al-Qalam</option>
                                <option value="069">69: Al-Haaqqa</option>
                                <option value="070">70: Al-Ma'aarij</option>
                                <option value="071">71: Nooh</option>
                                <option value="072">72: Al-Jinn</option>
                                <option value="073">73: Al-Muzzammil</option>
                                <option value="074">74: Al-Muddaththir</option>
                                <option value="075">75: Al-Qiyaama</option>
                                <option value="076">76: Al-Insaan</option>
                                <option value="077">77: Al-Mursalaat</option>
                                <option value="078">78: An-Naba</option>
                                <option value="079">79: An-Naazi'aat</option>
                                <option value="080">80: Abasa</option>
                                <option value="081">81: At-Takwir</option>
                                <option value="082">82: Al-Infitaar</option>
                                <option value="083">83: Al-Mutaffifin</option>
                                <option value="084">84: Al-Inshiqaaq</option>
                                <option value="085">85: Al-Burooj</option>
                                <option value="086">86: At-Taariq</option>
                                <option value="087">87: Al-A'laa</option>
                                <option value="088">88: Al-Ghaashiya</option>
                                <option value="089">89: Al-Fajr</option>
                                <option value="090">90: Al-Balad</option>
                                <option value="091">91: Ash-Shams</option>
                                <option value="092">92: Al-Lail</option>
                                <option value="093">93: Ad-Dhuhaa</option>
                                <option value="094">94: Ash-Sharh</option>
                                <option value="095">95: At-Tin</option>
                                <option value="096">96: Al-Alaq</option>
                                <option value="097">97: Al-Qadr</option>
                                <option value="098">98: Al-Bayyina</option>
                                <option value="099">99: Az-Zalzala</option>
                                <option value="100">100: Al-Aadiyaat</option>
                                <option value="101">101: Al-Qaari'a</option>
                                <option value="102">102: At-Takaathur</option>
                                <option value="103">103: Al-Asr</option>
                                <option value="104">104: Al-Humaza</option>
                                <option value="105">105: Al-Fil</option>
                                <option value="106">106: Quraish</option>
                                <option value="107">107: Al-Maa'un</option>
                                <option value="108">108: Al-Kawthar</option>
                                <option value="109">109: Al-Kaafiroon</option>
                                <option value="110">110: An-Nasr</option>
                                <option value="111">111: Al-Masad</option>
                                <option value="112">112: Al-Ikhlaas</option>
                                <option value="113">113: Al-Falaq</option>
                                <option value="114">114: An-Naas</option>
    </select>

    <h3>Preview:</h3>
    <div class="loading" id="loadingIndicator">
      <img src="https://i.imgur.com/XZgLL61.gif" alt="Loading...">
    </div>
    <audio id="audioPlayer" controls preload="auto">
      <source id="audioSource" src="" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>

    <div class="autoplay-container">
      <input type="checkbox" id="autoplay" checked>
      <label for="autoplay">Auto Play</label>
    </div>

    <h4>Download:</h4>
    <a id="audioLink" href="" download target="_blank">Download Audio</a>
  </div>

  <script>
    const audioPlayer = document.getElementById('audioPlayer');
    const audioSource = document.getElementById('audioSource');
    const audioLink = document.getElementById('audioLink');
    const autoplayCheckbox = document.getElementById('autoplay');
    const loadingIndicator = document.getElementById('loadingIndicator');
    const chapterSelect = document.getElementById('chapter');
    const reciterSelect = document.getElementById('reciter');

    function updateAudio() {
      const reciter = reciterSelect.value;
      const chapter = chapterSelect.value;
      const server = reciterSelect.options[reciterSelect.selectedIndex].dataset.server;
      const audioURL = `https://${server}.mp3quran.net/download/${reciter}/${chapter}.mp3`;
      
      loadingIndicator.style.display = 'block';
      audioSource.src = audioURL;
      audioLink.href = audioURL;
      audioPlayer.load();
      
      audioPlayer.oncanplay = () => {
        loadingIndicator.style.display = 'none';
        if (autoplayCheckbox.checked) {
          audioPlayer.play().catch(error => console.error("Autoplay failed:", error));
        }
      };
    }

    audioPlayer.onended = () => {
      playNextChapter();
    };

    function playNextChapter() {
      let currentIndex = chapterSelect.selectedIndex;
      if (currentIndex < chapterSelect.options.length - 1) {
        chapterSelect.selectedIndex = currentIndex + 1;
      } else {
        chapterSelect.selectedIndex = 0;
      }
      updateAudio();
    }
  </script>
</body>
</html>
